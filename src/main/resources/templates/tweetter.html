<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/layout :: head">
        <meta charset="UTF-8" />
        <title th:title="wepa-tweetter: +${tweetter.usename}">wepa-tweetter</title>
    </head>
    <body>
        <div th:replace="fragments/layout :: header"></div>
        
        <div class="container">
            <div class="row">
                <div class="col-2">
                    <div th:replace="fragments/layout :: sidebar"></div>
                </div>
                <div class="col-10">
                    USER PAGE
                    <ul class="list-unstyled">
                        <!<li><span th:text="${tweetter.username}">username</span><img th:if="${tweetter.profileImage != null}" th:src="@{/images/{id}(id=${tweetter.profileImage.id})}" class="mr-3" th:alt="'profile image of ' + ${tweetter.username}" width="200" height="auto" style="margin-left: 10px" /></li>
                        <li><span th:text="${tweetter.random}">debug</span></li>
                        <li><a th:href="@{/wepa-tweetter/__${tweetter.random}__/album}">Link to image album</a></li>
                    </ul>
                    <section th:if="${#authorization.expression('hasAuthority('''+tweetter.random+''')')}">
                        <h1>Tweetters you are following:</h1>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">username</th>
                                    <th scope="col">start of following</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="followed : ${tweettersFollowed}">
                                    <td th:text="${followed.followed.username}">username</td>
                                    <td th:text="${#temporals.format(followed.startFollowing, 'dd-MM-yyyy HH:mm')}">date</td>
                                    <td>
                                        <form action="/unfollow" method="POST">
                                            <input type="hidden" name="returnToUnfollow" th:value="${tweetter.random}" />
                                            <input type="hidden" name="unfollow" th:value="${followed.followed.username}" />
                                            <input type="submit" class="btn btn-primary" value="Unfollow" />
                                        </form>
                                    </td>
                                    <td>
                                        <form action="/block" method="POST">
                                            <input type="hidden" name="returnToBlock" th:value="${tweetter.random}" />
                                            <input type="hidden" name="block" th:value="${followed.followed.username}" />
                                            <input type="submit" class="btn btn-primary" value="Block" />
                                        </form>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <h1>Tweetters who are following you:</h1>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">username</th>
                                    <th scope="col">start of following</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="followedBy : ${tweettersFollowedBy}">
                                    <td th:text="${followedBy.followedBy.username}">username</td>
                                    <td th:text="${#temporals.format(followedBy.startFollowing, 'dd-MM-yyyy HH:mm')}">date</td>
                                    <td>
                                        <form action="/block" method="POST">
                                            <input type="hidden" name="returnToBlock" th:value="${tweetter.random}" />
                                            <input type="hidden" name="block" th:value="${followedBy.followedBy.username}" />
                                            <input type="submit" class="btn btn-primary" value="Block" />
                                        </form>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                </div>
            </div>
        </div>
    </body>
</html>
